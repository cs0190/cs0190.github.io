<!doctype HTML>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="codemirror.js"></script>
<script src="runmode.js"></script>
<script src="pyret.js"></script>
<script src="hilite.js"></script>
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>4&nbsp;Pyret Style Guide</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-fonts.css" title="default"/><link rel="stylesheet" type="text/css" href="codemirror.css" title="default"/><link rel="stylesheet" type="text/css" href="pyret.css" title="default"/><link rel="stylesheet" type="text/css" href="styles.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Pyret</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Getting_Started.html" class="tocviewlink" data-pltdoc="x">Getting Started</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Language_Concepts.html" class="tocviewlink" data-pltdoc="x">Language Concepts</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Builtins_and_Libraries.html" class="tocviewlink" data-pltdoc="x">Builtins and Libraries</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Pyret Style Guide</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Internals.html" class="tocviewlink" data-pltdoc="x">Internals</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Glossary.html" class="tocviewlink" data-pltdoc="x">Glossary</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>4&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Pyret Style Guide</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">4.1&nbsp;</td><td><a href="#%28part._.General%29" class="tocviewlink" data-pltdoc="x">General</a></td></tr><tr><td align="right">4.2&nbsp;</td><td><a href="#%28part._.Functions%29" class="tocviewlink" data-pltdoc="x">Functions</a></td></tr><tr><td align="right">4.3&nbsp;</td><td><a href="#%28part._.Data%29" class="tocviewlink" data-pltdoc="x">Data</a></td></tr><tr><td align="right">4.4&nbsp;</td><td><a href="#%28part._.Boolean_.Expressions%29" class="tocviewlink" data-pltdoc="x">Boolean Expressions</a></td></tr><tr><td align="right">4.5&nbsp;</td><td><a href="#%28part._.Naming_.Intermediate_.Expressions%29" class="tocviewlink" data-pltdoc="x">Naming Intermediate Expressions</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">4.1<tt>&nbsp;</tt></span><a href="#%28part._.General%29" class="tocsubseclink" data-pltdoc="x">General</a></td></tr><tr><td><span class="tocsublinknumber">4.1.1<tt>&nbsp;</tt></span><a href="#%28part._.Indentation%29" class="tocsubseclink" data-pltdoc="x">Indentation</a></td></tr><tr><td><span class="tocsublinknumber">4.1.2<tt>&nbsp;</tt></span><a href="#%28part._.Line_.Length%29" class="tocsubseclink" data-pltdoc="x">Line Length</a></td></tr><tr><td><span class="tocsublinknumber">4.1.3<tt>&nbsp;</tt></span><a href="#%28part._.Variable_.Naming%29" class="tocsubseclink" data-pltdoc="x">Variable Naming</a></td></tr><tr><td><span class="tocsublinknumber">4.1.3.1<tt>&nbsp;</tt></span><a href="#%28part._.Naming_.Constants%29" class="tocsubseclink" data-pltdoc="x">Naming Constants</a></td></tr><tr><td><span class="tocsublinknumber">4.1.3.2<tt>&nbsp;</tt></span><a href="#%28part._.Reusing_.Variable_.Names%29" class="tocsubseclink" data-pltdoc="x">Reusing Variable Names</a></td></tr><tr><td><span class="tocsublinknumber">4.1.4<tt>&nbsp;</tt></span><a href="#%28part._.File_.Naming%29" class="tocsubseclink" data-pltdoc="x">File Naming</a></td></tr><tr><td><span class="tocsublinknumber">4.1.5<tt>&nbsp;</tt></span><a href="#%28part._eg-tests%29" class="tocsubseclink" data-pltdoc="x">Example and Tests</a></td></tr><tr><td><span class="tocsublinknumber">4.2<tt>&nbsp;</tt></span><a href="#%28part._.Functions%29" class="tocsubseclink" data-pltdoc="x">Functions</a></td></tr><tr><td><span class="tocsublinknumber">4.2.1<tt>&nbsp;</tt></span><a href="#%28part._.Naming%29" class="tocsubseclink" data-pltdoc="x">Naming</a></td></tr><tr><td><span class="tocsublinknumber">4.2.2<tt>&nbsp;</tt></span><a href="#%28part._.Documentation_.Strings%29" class="tocsubseclink" data-pltdoc="x">Documentation Strings</a></td></tr><tr><td><span class="tocsublinknumber">4.2.3<tt>&nbsp;</tt></span><a href="#%28part._.Annotations%29" class="tocsubseclink" data-pltdoc="x">Annotations</a></td></tr><tr><td><span class="tocsublinknumber">4.2.4<tt>&nbsp;</tt></span><a href="#%28part._.Parametric_.Annotations%29" class="tocsubseclink" data-pltdoc="x">Parametric Annotations</a></td></tr><tr><td><span class="tocsublinknumber">4.2.5<tt>&nbsp;</tt></span><a href="#%28part._.Testing%29" class="tocsubseclink" data-pltdoc="x">Testing</a></td></tr><tr><td><span class="tocsublinknumber">4.3<tt>&nbsp;</tt></span><a href="#%28part._.Data%29" class="tocsubseclink" data-pltdoc="x">Data</a></td></tr><tr><td><span class="tocsublinknumber">4.3.1<tt>&nbsp;</tt></span><a href="#%28part._.Definitions%29" class="tocsubseclink" data-pltdoc="x">Definitions</a></td></tr><tr><td><span class="tocsublinknumber">4.3.2<tt>&nbsp;</tt></span><a href="#%28part._.Cases%29" class="tocsubseclink" data-pltdoc="x">Cases</a></td></tr><tr><td><span class="tocsublinknumber">4.4<tt>&nbsp;</tt></span><a href="#%28part._.Boolean_.Expressions%29" class="tocsubseclink" data-pltdoc="x">Boolean Expressions</a></td></tr><tr><td><span class="tocsublinknumber">4.4.1<tt>&nbsp;</tt></span><a href="#%28part._.Ask_.Blocks%29" class="tocsubseclink" data-pltdoc="x">Ask Blocks</a></td></tr><tr><td><span class="tocsublinknumber">4.4.2<tt>&nbsp;</tt></span><a href="#%28part._.Concise_.Conditionals%29" class="tocsubseclink" data-pltdoc="x">Concise Conditionals</a></td></tr><tr><td><span class="tocsublinknumber">4.5<tt>&nbsp;</tt></span><a href="#%28part._.Naming_.Intermediate_.Expressions%29" class="tocsubseclink" data-pltdoc="x">Naming Intermediate Expressions</a></td></tr><tr><td><span class="tocsublinknumber">4.5.1<tt>&nbsp;</tt></span><a href="#%28part._.Local_.Variables%29" class="tocsubseclink" data-pltdoc="x">Local Variables</a></td></tr><tr><td><span class="tocsublinknumber">4.5.2<tt>&nbsp;</tt></span><a href="#%28part._.Beware_of_var_%29" class="tocsubseclink" data-pltdoc="x">Beware of <span class="stt">var</span>!</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="math.html" title="backward to &quot;3.27 math&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Pyret&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Internals.html" title="forward to &quot;5 Internals&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>4<tt>&nbsp;</tt><a name="(part._.Pyret_.Style_.Guide)"></a>Pyret Style Guide</h3><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Frank Goodman and Shriram Krishnamurthi</p></span></div><p>Ahoy matey! Here be the style guide for Pyret. Follow me rules to find
the hidden treasure, or walk the plank!</p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.General%29" class="toclink" data-pltdoc="x">4.1<span class="hspace">&nbsp;</span>General</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Indentation%29" class="toclink" data-pltdoc="x">4.1.1<span class="hspace">&nbsp;</span>Indentation</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Line_.Length%29" class="toclink" data-pltdoc="x">4.1.2<span class="hspace">&nbsp;</span>Line Length</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Variable_.Naming%29" class="toclink" data-pltdoc="x">4.1.3<span class="hspace">&nbsp;</span>Variable Naming</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Naming_.Constants%29" class="toclink" data-pltdoc="x">4.1.3.1<span class="hspace">&nbsp;</span>Naming Constants</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Reusing_.Variable_.Names%29" class="toclink" data-pltdoc="x">4.1.3.2<span class="hspace">&nbsp;</span>Reusing Variable Names</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.File_.Naming%29" class="toclink" data-pltdoc="x">4.1.4<span class="hspace">&nbsp;</span>File Naming</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._eg-tests%29" class="toclink" data-pltdoc="x">4.1.5<span class="hspace">&nbsp;</span>Example and Tests</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Functions%29" class="toclink" data-pltdoc="x">4.2<span class="hspace">&nbsp;</span>Functions</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Naming%29" class="toclink" data-pltdoc="x">4.2.1<span class="hspace">&nbsp;</span>Naming</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Documentation_.Strings%29" class="toclink" data-pltdoc="x">4.2.2<span class="hspace">&nbsp;</span>Documentation Strings</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Annotations%29" class="toclink" data-pltdoc="x">4.2.3<span class="hspace">&nbsp;</span>Annotations</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Parametric_.Annotations%29" class="toclink" data-pltdoc="x">4.2.4<span class="hspace">&nbsp;</span>Parametric Annotations</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Testing%29" class="toclink" data-pltdoc="x">4.2.5<span class="hspace">&nbsp;</span>Testing</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Data%29" class="toclink" data-pltdoc="x">4.3<span class="hspace">&nbsp;</span>Data</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Definitions%29" class="toclink" data-pltdoc="x">4.3.1<span class="hspace">&nbsp;</span>Definitions</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Cases%29" class="toclink" data-pltdoc="x">4.3.2<span class="hspace">&nbsp;</span>Cases</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Boolean_.Expressions%29" class="toclink" data-pltdoc="x">4.4<span class="hspace">&nbsp;</span>Boolean Expressions</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Ask_.Blocks%29" class="toclink" data-pltdoc="x">4.4.1<span class="hspace">&nbsp;</span>Ask Blocks</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Concise_.Conditionals%29" class="toclink" data-pltdoc="x">4.4.2<span class="hspace">&nbsp;</span>Concise Conditionals</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Naming_.Intermediate_.Expressions%29" class="toclink" data-pltdoc="x">4.5<span class="hspace">&nbsp;</span>Naming Intermediate Expressions</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Local_.Variables%29" class="toclink" data-pltdoc="x">4.5.1<span class="hspace">&nbsp;</span>Local Variables</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Beware_of_var_%29" class="toclink" data-pltdoc="x">4.5.2<span class="hspace">&nbsp;</span>Beware of <span class="stt">var</span>!</a></p></td></tr></table><h4>4.1<tt>&nbsp;</tt><a name="(part._.General)"></a>General</h4><h5>4.1.1<tt>&nbsp;</tt><a name="(part._.Indentation)"></a>Indentation</h5><p>You should indent your code blocks using two spaces (not tabs).</p><h5>4.1.2<tt>&nbsp;</tt><a name="(part._.Line_.Length)"></a>Line Length</h5><p>The total length of your lines should be kept under 80 characters. The Pyret
editor displays a dotted blue at the 80 character mark when any of your lines
are over this limit.</p><p>For overly long lines, it&rsquo;s actually really hard to figure out where
to put in good line breaks. This is in every language. Look for
something that tries to match the logical structure of your program.</p><p><div class="SIntrapara">However, there&rsquo;s usually a better way to solve this problem: create
extra variables to name the intermediate pieces, and use those
names. E.g.: instead of worrying where to put in line breaks in
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun f(x, y, z):</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">g(some-very-long-thing(x * x, y + y), other-very-long-thing((x + y + z) / (2 * 3 * 4)))</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">it might be better to write it as
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun f(x, y, z):</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">sensible-name-1 = some-very-long-thing(x * x, y + y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">sensible-name-2 = other-very-long-thing((x + y + z) / (2 * 3 * 4))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">g(sensible-name-1, sensible-name-2)</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">(and think about indenting/shortening those two new lines).</div></p><p>Not only does this shorten lines, it makes it clearer what all these
pieces are doing, helping a later reader (who may be yourself!).</p><h5>4.1.3<tt>&nbsp;</tt><a name="(part._.Variable_.Naming)"></a>Variable Naming</h5><p>The programming language world rages about the use of <span class="stt">camelCase</span>
versus <span class="stt">under_scores</span> in variable names. Pyret&rsquo;s syntax supports
both, but we can do better.</p><p>In Pyret, you can use dashes (<span class="stt">-</span>)
inside variable names.<span class="refelem"><span class="refcolumn"><span class="refcontent">This is sometimes called &ldquo;kebab
case&rdquo;, but it would be more accurate to call it &ldquo;shish case&rdquo;.</span></span></span>
Thus, you would write <span class="stt">camel-case</span> and
<span class="stt">under-scores</span>. Unlike underscores, dashes don&rsquo;t need a shift key
(or disappear when text is underlined by an environment). Unlike
camelcase, dashes don&rsquo;t create ambiguities (what if one of the words
is in all-caps?). Dashes are also humanizing: they make your program
look that little bit more like human prose.</p><p>Most languages can&rsquo;t support dashes because the dash also stands for
infix subtraction. In Pyret, subtraction must be surrounded by
space. Therefore, <span class="stt">camel-case</span> is a name whereas <span class="stt">camel -
case</span> is subtraction.</p><h5>4.1.3.1<tt>&nbsp;</tt><a name="(part._.Naming_.Constants)"></a>Naming Constants</h5><p><div class="SIntrapara">You should name constants in all-capital letters unless an external
convention would dictate using some other capitalization for that
particular name.  For example,
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">MY-COUNT = 100</span></p></td></tr><tr><td><p><span class="stt">e = 2.7182</span></p></td></tr></table></div></p><h5>4.1.3.2<tt>&nbsp;</tt><a name="(part._.Reusing_.Variable_.Names)"></a>Reusing Variable Names</h5><p><div class="SIntrapara">Pyret is picky about letting you reuse variable names. This is to help
you avoid confusing two different variables that have the same name
and accidentally using the wrong one. Specifically, an inner scope
can&rsquo;t use a name that is already bound in an outer scope; but two
different inner scopes can each use the same name. For instance,
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun f(x): x + 1 end</span></p></td></tr><tr><td><p><span class="stt">fun g(x): x + 2 end</span></p></td></tr></table></div><div class="SIntrapara">is legal, but
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun h(x):</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">x = 4</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">x + 1</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">is not.</div></p><h5>4.1.4<tt>&nbsp;</tt><a name="(part._.File_.Naming)"></a>File Naming</h5><p>Use <span class="stt">.arr</span> as the extension for Pyret files.</p><h5>4.1.5<tt>&nbsp;</tt><a name="(part._eg-tests)"></a>Example and Tests</h5><p>We use the syntax of testing to represent two different tasks:
<span style="font-style: italic">examples</span>, which help us explore a problem and take steps
towards deriving a solution, and <span style="font-style: italic">tests</span>, which are designed to
find errors. These are subtly different.</p><p><div class="SIntrapara">We write (most) examples <span style="font-style: italic">before</span> writing the corresponding
code. Therefore, it makes sense to put these examples in an
<span class="stt">examples</span> block:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">examples:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">f(10) is 25</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">f(20) is-not 2000</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">The keyword <span class="stt">examples</span> is synonymous with <span class="stt">check</span>, so we
could as well have written <span class="stt">check</span> instead. However, by
convention we use <span class="stt">check</span> for tests rather than examples.</div></p><h4>4.2<tt>&nbsp;</tt><a name="(part._.Functions)"></a>Functions</h4><h5>4.2.1<tt>&nbsp;</tt><a name="(part._.Naming)"></a>Naming</h5><p>Give functions descriptive names. Do the same for arguments. That way,
a quick scan of a function&rsquo;s header will tell you what it does and
what the arguments are supposed to do.</p><h5>4.2.2<tt>&nbsp;</tt><a name="(part._.Documentation_.Strings)"></a>Documentation Strings</h5><p><div class="SIntrapara">Unless the name is self-evident, write a brief documentation string
for your function. For instance:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun insert(x, l):</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: "consumes sorted list l; returns it with x in the right place"</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">...</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">Try to write your documentation in functional form, i.e., describing
what the function consumes and what it returns after computation.</div></p><p><div class="SIntrapara">If your comment needs to span multiple lines, use three back-ticks&#8212;<wbr></wbr>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">```</span></p></td></tr></table></div><div class="SIntrapara">&#8212;<wbr></wbr>to begin and end the string. For instance:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun f(x):</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">doc: ```This is a</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">multi-line</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">comment here.```</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">x + x</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">This is also how you write a multi-line string in Pyret.</div></p><h5>4.2.3<tt>&nbsp;</tt><a name="(part._.Annotations)"></a>Annotations</h5><p><div class="SIntrapara">Wherever possible, annotate both argument and return values. For instance,
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun str-len(str :: String) -&gt; Number:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># ...</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">Even though Pyret does not currently check parametric annotations, you
should still write them for their value as user documentation. Thus:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun sum-str-lengths(lst :: List&lt;String&gt;) -&gt; Number:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># ...</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">You can even write an arbitrary predicate when a built-in annotation
isn&rsquo;t expressive enough. For instance, suppose we want to write a
function that consumes only non-negative numbers. We can define the
predicate&#8212;<wbr></wbr>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun non-negative(n :: Number) -&gt; Boolean:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">n &gt;= 0</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">and then use it as follows:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun sqrt(n :: Number%(non-negative)) -&gt; Number:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># ...</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div></p><h5>4.2.4<tt>&nbsp;</tt><a name="(part._.Parametric_.Annotations)"></a>Parametric Annotations</h5><p>You should avoid using <span class="stt">Any</span> as the subtype of a parametric data structure,
like a <span class="stt">List</span>.</p><p>In general, a <span class="stt">List&lt;Any&gt;</span> definition is often undesirable because it
indicates elements of any type can be members of the list. In particular,
this subtly implies that multiple elements of different types could exist.
In other words, <span class="stt">[list: 1, "apple", true]</span> would satisfy the annotation
<span class="stt">List&lt;Any&gt;</span>. Creating <span class="stt">List</span>s like this is usually bad practice.</p><p>In Pyret, we can do this by parametrizing the type. Rather than</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun search(lst :: List&lt;Any&gt;) -&gt; Any: ... end</span></p></td></tr></table></p><p>we&rsquo;d now do something like</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun search&lt;A&gt;(lst :: List&lt;A&gt;) -&gt; A: ... end</span></p></td></tr></table></p><p>Now, the elements of <span class="stt">lst</span> can be of any type, but all elements of lst will
be of type <span class="stt">A</span> (along with the return value of <span class="stt">search</span>)! Note that the
actual name of the type parameter is arbitrary (we could have written
<span class="stt">search&lt;SomeOtherName&gt;</span> instead of <span class="stt">search&lt;A&gt;</span>), but it is convention to
use a single letter for parametric annotations.</p><h5>4.2.5<tt>&nbsp;</tt><a name="(part._.Testing)"></a>Testing</h5><p>You should test every function you write for both general cases and edge cases.</p><p><div class="SIntrapara">As we have discussed earlier [<a href="#%28part._eg-tests%29" data-pltdoc="x">Example and Tests</a>], you can write
these using <span class="stt">examples</span> and <span class="stt">check</span>. In addition, you can
also write examples and tests of functions as part of the function
declaration, using <span class="stt">where</span>:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun double(n :: Number) -&gt; Number:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">n * 2</span></p></td></tr><tr><td><p><span class="stt">where:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">double(0) is 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">double(5) is 10</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">double(-5) is -10</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">double(100) is 200</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">double(-100) is -200</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">Usually, the examples you create to help you think through the problem
would go in an <span class="stt">examples</span> block, and a large suite of tests would
end up in a separate <span class="stt">check</span> block. In a <span class="stt">where</span> block, we
should have a small number of <span style="font-style: italic">illustrative</span> examples that help a
reader to quickly grasp the essence of the function&rsquo;s behavior. Try to
keep the size of the <span class="stt">where</span> block small and manageable. In
particular, a large test suite&#8212;<wbr></wbr>meant to cover lots of behaviors,
including potentially redundant ones, and to find bugs&#8212;<wbr></wbr>should go in
a separate <span class="stt">check</span> block rather than cluttering up the function
definition&rsquo;s <span class="stt">where</span> region.</div></p><h4>4.3<tt>&nbsp;</tt><a name="(part._.Data)"></a>Data</h4><h5>4.3.1<tt>&nbsp;</tt><a name="(part._.Definitions)"></a>Definitions</h5><p>Wherever possible, provide annotations in Data definitions:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">data Animal:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| snake(name :: String)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| dillo(weight :: Number, living :: Boolean)</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></p><h5>4.3.2<tt>&nbsp;</tt><a name="(part._.Cases)"></a>Cases</h5><p><div class="SIntrapara">To branch on the variants of a datum, use <span class="stt">cases</span>:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">cases (Animal) a:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| snake(s) =&gt; s == "Dewey"</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| dillo(w, l) =&gt; (w &lt; 10) and l</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">Sometimes, you won&rsquo;t use all the parts of a datum. You can still name
an unused part, but it is suggestive to use <span class="stt">_</span> instead; this
indicates to the reader that that field won&rsquo;t be used in this
computation, so they can ignore it:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">cases (Animal) a:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| snake(s) =&gt; ...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| dillo(w, _) =&gt; ...</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">Note that <span class="stt">_</span> is different from identifier names like
<span class="stt">dummy</span> because you can&rsquo;t write
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">cases (Animal) a:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| snake(s) =&gt; ...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| dillo(dummy, dummy) =&gt; ...</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">(you&rsquo;ll get an error because you&rsquo;re trying to bind <span class="stt">dummy</span>
twice), but you can write
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">cases (Animal) a:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| snake(s) =&gt; ...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| dillo(_, _) =&gt; ...</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">and thus ignore multiple fields.</div></p><p><div class="SIntrapara">Finally, if your conditional is not designed to handle a particular
kind of datum, signal an error:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">cases (Animal) a:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| snake(s) =&gt; ...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| dillo(_, _) =&gt; raise("Serpents only, please!")</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div></p><h4>4.4<tt>&nbsp;</tt><a name="(part._.Boolean_.Expressions)"></a>Boolean Expressions</h4><h5>4.4.1<tt>&nbsp;</tt><a name="(part._.Ask_.Blocks)"></a>Ask Blocks</h5><p>If you have an <span class="stt">if</span> block containing a lot of conditionals (greater than 3
branches), you should convert it to an <span class="stt">ask</span> block. This aligns your
conditionals along the left side of the block, which makes your code look
cleaner and more readable.</p><p>For example, this <span class="stt">if</span> block is very verbose:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun is-this-noah(str :: String) -&gt; String:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if str == "Noah":</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"Yes"</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">else if str == "Nosh":</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"Close"</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">else if str == "No":</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"ah"</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">else if str == "Noa":</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"I don&#8217;t think so"</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">else:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"No"</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></p><p>However, we can make it more concise using an <span class="stt">ask</span> block:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun is-this-noah(str :: String) -&gt; String:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">Ask:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| str == "Noah" then: "Yes"</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| str == "Nosh" then: "Close"</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| str == "No" then: "ah"</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| str == "Noa" then: "I don&#8217;t think so"</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| otherwise: "No"</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></p><h5>4.4.2<tt>&nbsp;</tt><a name="(part._.Concise_.Conditionals)"></a>Concise Conditionals</h5><p>You should never determine the boolean value of something by doing:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">if some-boolean == true:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">...</span></p></td></tr><tr><td><p><span class="stt">else:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">...</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></p><p>Instead, you should use:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">if some-boolean:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">...</span></p></td></tr><tr><td><p><span class="stt">else:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">...</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></p><p>Similarly, do not use an <span class="stt">if</span> expression to evalulate a predicate, and
then return <span class="stt">true</span> or <span class="stt">false</span>. For example, this would be
considered incorrect:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">if my-expression:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">true</span></p></td></tr><tr><td><p><span class="stt">else:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">false</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></p><p>Instead, the entire <span class="stt">if</span> expression above can be replaced with
<span class="stt">my-expression</span>.</p><h4>4.5<tt>&nbsp;</tt><a name="(part._.Naming_.Intermediate_.Expressions)"></a>Naming Intermediate Expressions</h4><h5>4.5.1<tt>&nbsp;</tt><a name="(part._.Local_.Variables)"></a>Local Variables</h5><p><div class="SIntrapara">You are welcome to create local names for expressions. For instance,
instead of writing
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun hypo-len(a, b):</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">num-sqrt((a * a) + (b * b))</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">you are welcome to write
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun hypo-len(a, b):</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">a2 = a * a</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">b2 = b * b</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">sum-of-other-two-sides = a2 + b2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">num-sqrt(sum-of-other-two-sides)</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">Even though you shouldn&rsquo;t have multiple <span style="font-style: italic">expressions</span> as a
function body, these local definitions are not expressions in their
own right, so this is perfectly legal code; the value of calling the
function is that produced by its expression (which, here, is
<span class="stt">num-sqrt(sum-of-other-two-sides)</span>).</div></p><h5>4.5.2<tt>&nbsp;</tt><a name="(part._.Beware_of_var_)"></a>Beware of <span class="stt">var</span>!</h5><p><div class="SIntrapara">You might have noticed that Pyret lets you write <span class="stt">var</span> before
local names: for instance, you can write the previous example as
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">fun hypo-len(a, b):</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">var a2 = a * a</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">var b2 = b * b</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">var sum-of-other-two-sides = a2 + b2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">num-sqrt(sum-of-other-two-sides)</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></div><div class="SIntrapara">instead. In particular, if you have prior experience in a language
like JavaScript, you might think this is <span style="font-style: italic">good</span> practice. It&rsquo;s
not: <span style="font-style: italic">don&rsquo;t do this</span>! In Pyret, adding <span class="stt">var</span> turns each name
into a <span style="font-style: italic">mutable variable</span>, i.e., one that you can modify using an
assignment statement. Therefore, do not use <span class="stt">var</span> unless you
absolutely mean to create a mutable variable.</div></p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="math.html" title="backward to &quot;3.27 math&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Pyret&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Internals.html" title="forward to &quot;5 Internals&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>